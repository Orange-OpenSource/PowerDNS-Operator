{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>PowerDNS Operator is a Kubernetes operator that manages PowerDNS service.</p> <p>With PowerDNS Operator you can manage zones, records and other PowerDNS resources directly from Kubernetes. It is designed to be a simple and easy-to-use solution to manage PowerDNS directly from Kubernetes through Custom Resources. The PowerDNS service can be located inside or outside of Kubernetes, it does not matter since the Operator relies on the PowerDNS API.</p> <p>Info</p> <p>This project use the official PowerDNS API and cannot be plugged to PowerDNS-Admin project which implement its own specific API on top PowerDNS's API. There is no issue if you want to use both projects together, but the operator can only relies on the official API and you may notice issues if you try to use PowerDNS-Admin to manage the same resources as the operator.</p>"},{"location":"#why-use-powerdns-operator","title":"Why use PowerDNS Operator?","text":"<p>We needed to offer DNS capabilities to users and considered relying on the PowerDNS-Admin project. However, we wanted a more flexible solution that could be natively integrated with our existing Kubernetes infrastructure. We were also looking for a solution that could be easily integrated with our GitOps workflow to automate the creation of DNS records as well as other resources such as Ingress, Services, etc.</p> <p>Another reason is that the PowerDNS-Admin project is not in good health and will probably be rewritten in the future. We wanted a solution that is more reliable and easily maintained.</p> <p>The PowerDNS Operator is a convenient way to offer self-service DNS capabilities to users, allowing them to create resources directly in the Kubernetes cluster. Additionally, you can use Backstage or any Internal Developer Platform and connect it to the Kubernetes API server that contains the PowerDNS Operator if you don't want to grant direct access to the Kubernetes cluster.</p>"},{"location":"snippet-example/","title":"Snippet example","text":"<pre><code>```yaml\n</code></pre>"},{"location":"guides/rrsets/","title":"RRset deployment","text":""},{"location":"guides/rrsets/#specification","title":"Specification","text":"<p>The specification of the <code>RRset</code> contains the following fields:</p> Field Type Required Description type string Y Type of the record (e.g. \"A\", \"PTR\", \"MX\") name string Y Name of the record ttl uint32 Y DNS TTL of the records, in seconds records []string Y All records in this Resource Record Set comment string N Comment on RRSet zoneRef ZoneRef Y ZoneRef reference the zone the RRSet depends on <p>The specification of the <code>ZoneRef</code> contains the following fields:</p> Field Type Required Description name string Y Name of the zone"},{"location":"guides/rrsets/#example","title":"Example","text":"<pre><code>apiVersion: dns.cav.enablers.ob/v1alpha1\nkind: RRset\nmetadata:\n  name: test.helloworld.com\nspec:\n  comment: nothing to tell\n  type: A\n  name: test\n  ttl: 300\n  records:\n    - 1.1.1.1\n    - 2.2.2.2\n  zoneRef:\n    name: helloworld.com\n</code></pre> <p>Note: The name can be canonical or not.</p>"},{"location":"guides/warnings/","title":"Warnings on field format","text":""},{"location":"guides/warnings/#deal-with-canonical-names","title":"Deal with canonical names","text":"<p>For some resources such as CNAME, PTR, MX, SRV, the records field MUST be in canonical format (end with a dot \".\"). See following examples.</p>"},{"location":"guides/warnings/#cname","title":"CNAME","text":"<pre><code>---\napiVersion: dns.cav.enablers.ob/v1alpha1\nkind: RRset\nmetadata:\n  name: test4.helloworld.com\nspec:\n  type: CNAME\n  name: test4\n  ttl: 300\n  records:\n    - test1.helloworld.com.\n  zoneRef:\n    name: helloworld.com\n</code></pre>"},{"location":"guides/warnings/#ptr","title":"PTR","text":"<pre><code>---\napiVersion: dns.cav.enablers.ob/v1alpha1\nkind: RRset\nmetadata:\n  name: 1.1.168.192.in-addr.arpa.helloworld.com\nspec:\n  type: PTR\n  name: \"1\"\n  ttl: 300\n  records:\n    - mailserver.helloworld.com.\n  zoneRef:\n    name: 1.168.192.in-addr.arpa\n</code></pre>"},{"location":"guides/warnings/#mx","title":"MX","text":"<pre><code>---\napiVersion: dns.cav.enablers.ob/v1alpha1\nkind: RRset\nmetadata:\n  name: mx.helloworld.com\nspec:\n  type: MX\n  name: \"helloworld.com.\"\n  ttl: 300\n  records:\n    - \"10 mailserver1.helloworld.com.\"\n    - \"20 mailserver2.helloworld.com.\"\n  zoneRef:\n    name: helloworld.com\n</code></pre>"},{"location":"guides/warnings/#srv","title":"SRV","text":"<pre><code>---\napiVersion: dns.cav.enablers.ob/v1alpha1\nkind: RRset\nmetadata:\n  name: database.srv.helloworld.com\nspec:\n  type: SRV\n  name: \"_database._tcp.myapp\"\n  ttl: 300\n  records:\n    - 1 50 25565 test2.helloworld.com.\n  zoneRef:\n    name: helloworld.com\n</code></pre>"},{"location":"guides/warnings/#txt-records","title":"TXT Records","text":"<p>Sometime, you may encounter the following error when applying a RRset custom resource: <pre><code>status:\n  syncErrorDescription: 'Record helloworld.com./TXT ''Welcome to the helloworld.com\n    domain'': Parsing record content (try ''pdnsutil check-zone''): Data field in\n    DNS should start with quote (\") at position 0 of ''Welcome to the helloworld.com\n    domain'''\n  syncStatus: Failed\n</code></pre></p> <p>This error is due to a wrong format for the RRset. TXT records MUST start AND end with an escaped quote (\\\"). See following example.  </p> <pre><code>---\napiVersion: dns.cav.enablers.ob/v1alpha1\nkind: RRset\nmetadata:\n  name: txt.helloworld.com\nspec:\n  type: TXT\n  name: \"helloworld.com.\"\n  ttl: 300\n  records:\n    - \"\\\"Welcome to the helloworld.com domain\\\"\"\n  zoneRef:\n    name: helloworld.com\n</code></pre>"},{"location":"guides/zones/","title":"Zone deployment","text":""},{"location":"guides/zones/#specification","title":"Specification","text":"<p>The specification of the <code>Zone</code> contains the following fields:</p> Field Type Required Description kind string Y Kind of the zone, one of \"Native\", \"Master\", \"Slave\", \"Producer\", \"Consumer\" nameservers []string Y List of the nameservers of the zone catalog string N The catalog this zone is a member of soa_edit_api string N The SOA-EDIT-API metadata item, one of \"DEFAULT\", \"INCREASE\", \"EPOCH\", defaults to \"DEFAULT\""},{"location":"guides/zones/#example","title":"Example","text":"<pre><code>apiVersion: dns.cav.enablers.ob/v1alpha1\nkind: Zone\nmetadata:\n  name: helloworld.com\nspec:\n  nameservers:\n    - ns1.helloworld.com\n    - ns2.helloworld.com\n  kind: Master\n  catalog: catalog.helloworld\n  soa_edit_api: EPOCH\n</code></pre>"},{"location":"introduction/faq/","title":"FAQ","text":""},{"location":"introduction/faq/#can-i-use-powerdns-admin-and-powerdns-operator-together","title":"Can I use PowerDNS-Admin and PowerDNS Operator together?","text":"<p>No, the operator only supports the official PowerDNS API. The PowerDNS-Admin project implements its own specific API on top of PowerDNS's API. There is no issue if you want to use both projects together, but the operator can only rely on the official API. You may notice issues if you try to use PowerDNS-Admin to manage the same resources as the operator.</p>"},{"location":"introduction/faq/#can-i-manage-multiple-powerdns-servers-with-a-single-operator","title":"Can I manage multiple PowerDNS servers with a single operator?","text":"<p>No, the operator is designed to manage a single PowerDNS server. If you need to manage multiple PowerDNS servers, you will have to deploy multiple instances of the operator in multiple Kubernetes clusters, each one managing a different PowerDNS server.</p> <p>This may be technically possible in the future, but it is not a priority for the project.</p>"},{"location":"introduction/faq/#can-i-set-an-interval-to-check-for-drifts-between-the-powerdns-server-and-the-kubernetes-resources","title":"Can I set an interval to check for drifts between the PowerDNS server and the Kubernetes resources?","text":"<p>The operator will not loop on each resource to check if it is in sync with the PowerDNS server. It will only react to events (create, update, delete) on the resources. If you update the resources, the operator will update the PowerDNS server accordingly. If you delete the resources, the operator will delete the resources from PowerDNS.</p> <p>This should be relatively easy to implement in the future if needed, allowing the user to choose a loop interval to remediate potential drifts.</p>"},{"location":"introduction/getting-started/","title":"Getting Started","text":"<p>PowerDNS Operator runs within your Kubernetes cluster as a deployment resource. It utilizes CustomResourceDefinitions (CRDs) to manage PowerDNS resources. The Operator communicates with the PowerDNS API to manage zones and records.</p>"},{"location":"introduction/getting-started/#pre-requisites","title":"Pre-requisites","text":"<p>Before you can install PowerDNS Operator, you need to have the following:</p> <ul> <li>A Kubernetes cluster v1.29.0 or later</li> <li>A PowerDNS server v4.7 or later</li> </ul> <p>Note: The PowerDNS API must be enabled and accessible from the Kubernetes cluster where the operator is running.</p>"},{"location":"introduction/getting-started/#installing-with-kustomize","title":"Installing with Kustomize","text":"<p>Create the namespace and create a Secret containing the needed PowerDNS variables but you can also create the Secret using External Secrets or any other secret management tool.</p> <p>Theses secrets are used to configure the PowerDNS Operator to connect to the PowerDNS API.</p> <pre><code>kubectl create namespace powerdns-operator-system\nkubectl apply -f - &lt;&lt;EOF\napiVersion: v1\nkind: Secret\nmetadata:\n  name: powerdns-operator-manager\n  namespace: powerdns-operator-system\ntype: Opaque\nstringData:\n  PDNS_API_URL: https://powerdns.example.local:8081\n  PDNS_API_KEY: secret\n  PDNS_API_VHOST: localhost\nEOF\n</code></pre> <p>Install the latest version using the following command:</p> <pre><code>kubectl apply -k https://github.com/Orange-OpenSource/PowerDNS-Operator/releases/latest/download/bundle.yaml\n</code></pre> <p>Or you can specify a specific version (e.g. <code>v0.1.0</code>):</p> <pre><code>kubectl apply -k https://github.com/Orange-OpenSource/PowerDNS-Operator/releases/download/v0.1.0/bundle.yaml\n</code></pre>"},{"location":"introduction/getting-started/#installing-with-helm","title":"Installing with Helm","text":"<p>We are working on a Helm chart to simplify the installation process. The Helm chart will be available in near future.</p>"},{"location":"introduction/overview/","title":"API Overview","text":"<p>TODO</p>"},{"location":"introduction/stability-support/","title":"Stability and Support","text":"<p>TODO</p>"}]}